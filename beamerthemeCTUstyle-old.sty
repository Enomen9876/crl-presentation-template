\mode<presentation>

% Requirement
\RequirePackage{tikz}
\RequirePackage{xcolor}
\definecolor{ctu4blue}{rgb}{0.0781, 0.4688, 0.7773} %#1478c

%delete navigation buttons
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{blocks}[rounded][shadow=true]

% define paths
\newcommand{\CTULogoPath}{logo/ctu-en}
\newcommand{\CTULogoNegPath}{logo/ctu-en-complementary-negative}
\newcommand{\AICLogoBlackPath}{logo/aic-black}
\newcommand{\AICLogoWhitekPath}{logo/aic-white}
\newcommand{\AICLogoPrimaryPath}{logo/aic-primary}
\newcommand{\AICLogoRainbowPath}{logo/aic-rainbow}

% Logos used in the presentation
% - NOTE: make sure you follow CTU graphical identity manual (CS-only) at: https://www.cvut.cz/logo-a-graficky-manual     
% '-> path to CTU logo used on the title page
\newcommand{\deployedCTULogoTitlePagePath}{\CTULogoPath}
% '-> path to AIC logo usef on the title page
\newcommand{\deployedAICLogoTitlePagePath}{\AICLogoRainbowPath}
% '-> path to CTU logo used in the top line on regular slides
\newcommand{\deployedCTULogoHeadLinePath}{\CTULogoNegPath}

% NO FUCKING IDEA WHY THIS IS HERE
\pgfdeclareimage[height=1cm]{ctu_header}{\deployedCTULogoHeadLinePath}
% this is never used
%\pgfdeclareimage[height=0.6cm]{aic}{\AICLogoPath}

\setlength{\parindent}{0em}
\setlength{\parskip}{0em}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Title Page
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\defbeamertemplate*{title page}{ctu}[1][]
{
  % logo line
  % '-> move everything a bit up
  \vskip -40pt
  \includegraphics[width=80pt]{\deployedCTULogoTitlePagePath}
  \hfill
  \includegraphics[width=80pt]{\deployedAICLogoTitlePagePath}
  
  % NOTE: add some spacing if needed
  \vspace{20pt}

  % text block
  \begin{centering}
    % title related
    % '-> set font
    \usebeamerfont{title}
    % '-> add title in ctu blue
    {\color{ctu4blue}\inserttitle}%
    % add small space
    \vskip0.7cm%
    % author related
    % '-> set font
    \usebeamerfont{author}
    % '-> insert text
    {\insertauthor}%
    % add small spaces
    \vskip0.7cm%
    % institude related
    % '-> set font  
    % '-> add text
    {\centering \insertinstitution}%
    % this makes and '%' on the line end ensure that it is all centered
    \vskip0.1cm
  \end{centering}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Headline
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\defbeamertemplate*{headline}{fg=white,bg=ctu4blue}
{
  \begin{tikzpicture}
    % create header canvas (bounding box)
    \useasboundingbox (0,0) rectangle(\the\paperwidth, 1.1);
    % do something only on non-title pages:
    % '-> NOTE: \relax stops expanding condition
    %           see :https://tex.stackexchange.com/questions/96501/what-does-relax-do
    \ifnum\thepage>1\relax%
      % ... fill the rectangle by CTU4blue
      \fill[color=ctu4blue] (0,0) rectangle (\the\paperwidth,1.1);
      % ... add logo node to the right
      \node[anchor=east] at (\the\paperwidth, 0.55) {\pgfuseimage{ctu_header}};
      % ... add text node to the left
      \node[anchor=west] at (0.25, 0.5) {
        % ... adding text-box to the node
        \parbox[t]{0.75\paperwidth}{
          % ... add title
          \usebeamerfont{headlinetitle}{\inserttitle}
          % ... add vertical space filling the space
          %     '-> alternatively use %\\[2pt]
          \vfill{}
          % ... add author
          \usebeamerfont{headlineauthor}{\insertshortauthor}
        }
      };
    \fi
  \end{tikzpicture}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Footline
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\defbeamertemplate*{footline}{}
{
  % define footline space
  \newcommand{\footlinespace}{2ex}
  % first leave vertical mode (used in slide body) and enter horizontal mode
  % '-> see: https://tex.stackexchange.com/questions/22852/function-and-usage-of-leavevmode
  \leavevmode%
  % ... then create horizontal box ...
  \hbox{%
    % do something only on non-title pages: 
    \ifnum\thepage>1\relax%
      \begin{beamercolorbox}[wd=\paperwidth,ht=2.25ex,dp=1ex]{}%
        % segment \FootLineLeft
        % '-> adding space from the left edge
        \hspace{\footlinespace}
        % '-> setting font 
        \usebeamerfont{footlinetext}
        % '-> including foot line text
        {\FootLineLeft}
        %\hspace{\footlinespace}
        % adding space between left foot line and right foot line text
        \hfill{}
        % segment \FootLineRight
        % '-> setting font 
        \usebeamerfont{footlinetext}
        % '-> including foot line text
        {\FootLineRight}
        % '-> adding space between right footnote text and slide counter
        \hspace{\footlinespace}
        % segment slide counter
        % '-> setting font 
        \usebeamerfont{footlineslidecnt}
        % '-> include slide counter
        {\insertframenumber{} / \inserttotalframenumber{}}
        % '-> add space between slide counter and the right edge
        \hspace{\footlinespace}
      \end{beamercolorbox}%
    \fi
  }%
  \vskip7pt%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Frame title
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\defbeamertemplate*{frametitle}{texsx}[1][]
{
  \vspace{-0.4cm}
  \begin{center}
    \usebeamerfont{frametitle} \insertframetitle
  \end{center}
  \vskip-0.8cm
}


% Settings
%\setbeamercolor*{title page header}{fg=white}
%\setbeamercolor*{author}{fg=white}
%\setbeamercolor*{date}{fg=white}
%
\setbeamerfont{author}{series=\normalfont, size=\normalsize}
\setbeamerfont{title}{series=\bf, size=\Large}
\setbeamerfont{institute}{size=\small}

%% HEADLINE-related
\setbeamercolor{headline} {fg=white}
\setbeamerfont{headlinetitle} {series=\bf, size={\fontsize{11.5pt}{14pt}}}
% reseting typset using \normalfont
% \-> see: https://latexref.xyz/Font-styles.html
\setbeamerfont{headlineauthor} {series=\normalfont, size=\footnotesize}

%% FOOTLINE-related
% '-> set footline color to CTUblue
\setbeamercolor{footline} {fg=ctu4blue}
% '-> set footline text font
\setbeamerfont{footlinetext} {series=\normalfont, size=\scriptsize}
% '-> set slide counter font
\setbeamerfont{footlineslidecnt} {series=\normalfont, size=\scriptsize}

%% SLIDETITLE-related
\setbeamercolor{frametitle}{fg=ctu4blue}
\setbeamerfont{frametitle}{series=\bf}

%\setbeamercolor{author in head/foot}{fg=black}
%\setbeamercolor{institute in head/foot}{fg=black}
%\setbeamercolor{date in head/foot}{fg=black}

%% itemize settings
% '-> original triangular bullet-symbol
% \setbeamertemplate{itemize item}{\scriptsize\raise1.25pt\hbox{\donotcoloroutermaths$\blacktriangleright$}}
% '-> set all three item-levels to the respective symbols
\setbeamertemplate{itemize item}[square]
\setbeamertemplate{itemize subitem}[square]
\setbeamertemplate{itemize subsubitem}[triangle]
% '-> set all three item-levels to CTUBlue
\setbeamercolor{itemize item}{fg=ctu4blue}
\setbeamercolor{itemize subitem}{fg=ctu4blue}
\setbeamercolor{itemize subsubitem}{fg=ctu4blue}
% '-> set subitem level size
\setbeamertemplate{itemize/enumerate subbody begin}{\footnotesize}
% '-> set enumerate symbols color
\setbeamercolor{enumerate item}{fg=ctu4blue}
\setbeamercolor{enumerate subitem}{fg=ctu4blue}
% '-> set sections marks in table of content
%     NOTE: ok, I've never use that
\setbeamertemplate{sections/subsections in toc}[square]
\setbeamertemplate{enumerate item}{\quad\small\insertenumlabel.}

%\setbeamertemplate{itemize item}{\makebox[\labelwidth][l]{\centering\textbullet}}
%\setbeamertemplate{enumerate item}{\makebox[\labelwidth][r]{\footnotesize\insertenumlabel.}}

\setbeamersize{text margin left=15pt,text margin right=15pt} 
\setlength{\leftmargini}{12pt}
%\addtolength{\leftmargini}{\labelsep}
\setlength{\leftmarginii}{10pt}
%\addtolength{\leftmarginii}{\labelsep}
\setlength{\leftmarginiii}{12pt}
%\addtolength{\leftmarginiii}{\labelsep}

%\setlength{\leftmargini}{\labelwidth}
%\addtolength{\leftmargini}{\labelsep}
%\setlength{\leftmarginii}{\labelwidth}
%\addtolength{\leftmarginii}{\labelsep}
%\setlength{\leftmarginiii}{\labelwidth}
%\addtolength{\leftmarginiii}{\labelsep}

%\setlength{\leftmargine}{12pt}
%\setlength{\leftmarginee}{10pt}
%\setlength{\leftmargineee}{12pt}

%Set Technika font as the main font
\RequirePackage{fontspec}
\usefonttheme[onlymath]{serif} %for nice equations
\setsansfont[
  BoldFont={Technika-Regular},
  ItalicFont={Technika-LightItalic},
  BoldItalicFont={Technika-Italic}
]{Technika-Light}
\mode<all>

